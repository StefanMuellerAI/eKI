# Production Docker Compose Configuration
# Use: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  postgres:
    # POSTGRES_PASSWORD comes from .env.local (env_file in base compose)
    # Do NOT use POSTGRES_PASSWORD_FILE here -- it conflicts with POSTGRES_PASSWORD
    ports: []

  redis:
    ports: []

  temporal:
    # POSTGRES_PWD comes from .env.local (env_file in base compose)
    ports: []

  temporal-ui:
    ports: []

  ollama:
    ports: []

  api:
    environment:
      - ENV=production
      - DEBUG=false
    # All secrets (DATABASE_URL, API_SECRET_KEY, etc.) come from .env.local
    # Remove development volume mounts for production
    volumes: []

  worker:
    environment:
      - ENV=production
      - DEBUG=false
    # All secrets come from .env.local
    # Remove development volume mounts for production
    volumes: []
